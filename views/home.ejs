<link rel="stylesheet" href="/styles/home.css">
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<div class="container">
  <div class="home">
    <div class="tools glass">
      <header>
        <a href="/home" class="logo" aria-label="Home">
          <svg class="logo-icon" width="150" height="150" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <defs>
              <clipPath id="a">
                <rect width="150" height="150" fill="none" stroke-width="0"></rect>
              </clipPath>
            </defs>
            <g>
              <g>
                <g clip-path="url(#a)">
                  <g>
                    <g>
                      <path fill="#b7d3ff" stroke="#005ce2" stroke-linecap="round" stroke-linejoin="round" d="M43.97,21.21h-.03s-1.35.84-3.15.84-2.71-1.8-4.51-.9c-1.81.9-4.51-1.8-4.51,1.8,0,0-3.61,1.81-.9,4.51,2.7,2.71,6.31-2.7,7.21.91.9,3.6-2.7,3.6-1.8,5.41.9,1.8,3.13,2.12,2.92,4.67v.05c-4.07,4.38-10.14,6.87-16.75,6.03-8.22-1.05-14.97-7.41-16.5-15.55-.68-3.67-.31-7.23.86-10.38h.22c4.12,1.88,3.09,2.64,3.09,4.44s1.8,1.81,4.51,2.71c2.71.9,1.8,2.7,1.8,4.51s3.61,2.7,3.61,2.7c-.66,2.64.13,5.76.6,7.25.21.66.87,1.12,1.54.98.57-.11,1.02-.56.57-1.91-.9-2.71,3-2.94,3.61-3.61,1.8-2.01,3.6-3.61,1.8-5.41-1.8-1.81-3.61-1.81-4.51-3.61-.9-1.8-2.71,0-4.51-.9s-4.51-1.11-4.51-2.71c0-1.27,1.8-.9,2.71-2.7.9-1.81,3.6-4.51,6.31-4.51s2.71-.9,1.81-2.7c-1.01-2.02-2.6-1.97-3.64.04-.9,1.75-2.23,1.3-2.23,1.3,0,0-2.25-1.35,0-3.6,1.8-1.81,0-3.61-2.27-3.37h-.03c2.82-1.22,5.98-1.8,9.31-1.53,4.83.39,9.21,2.59,12.41,5.93-.09.95-1,2.24-2.41,2.94-1.8.9-3.61-1.81-4.51-.91-.9.91-.9,2.71,0,3.61.9.9,3.61-.9,5.41-.9,1.52,0,4.6,1.18,5.55,1.56.39.97.69,1.97.92,3.01Z"></path>
                      <path fill="#fff" stroke="#005ce2" stroke-linecap="round" stroke-miterlimit="10" d="M26.35 35.67c-.6.67-4.51.9-3.61 3.61.45 1.35 0 1.8-.56 1.92-.68.14-1.33-.32-1.54-.98-.47-1.49-1.26-4.61-.6-7.25 0 0-3.61-.9-3.61-2.71s.9-3.61-1.8-4.51c-2.71-.9-4.51-.9-4.51-2.71s1.03-2.56-3.09-4.44h-.22c1.82-4.99 5.64-9 10.48-11.1h.03c2.27-.24 4.08 1.56 2.27 3.36-2.25 2.25 0 3.61 0 3.61 0 0 1.33.44 2.23-1.31 1.03-2.01 2.63-2.06 3.64-.04.9 1.8.89 2.69-1.81 2.69s-5.41 2.71-6.31 4.51-2.71 1.43-2.71 2.71c0 1.6 2.71 1.8 4.51 2.71 1.8.9 3.61-.9 4.51.9s2.71 1.8 4.51 3.61 0 3.4-1.8 5.41zM39.2 38.45c.21-2.55-2.02-2.87-2.92-4.67-.9-1.81 2.7-1.81 1.8-5.41-.9-3.61-4.51 1.8-7.21-.91-2.71-2.7.9-4.51.9-4.51 0-3.6 2.7-.9 4.51-1.8 1.8-.9 2.7.9 4.51.9s3.15-.83 3.15-.83h.03c.13.61.23 1.23.3 1.87.66 5.96-1.39 11.45-5.07 15.41v-.05zM43.05 18.2c-.95-.38-4.03-1.56-5.55-1.56-1.8 0-4.51 1.8-5.41.9-.9-.9-.9-2.7 0-3.61.9-.9 2.71 1.81 4.51.91 1.41-.7 2.32-1.99 2.41-2.94 1.72 1.81 3.11 3.94 4.04 6.3z"></path>
                    </g>
                    <path fill="none" stroke="#005ce2" stroke-linecap="round" stroke-linejoin="round" d="M38.58 5.88c3.36 2.35 6.14 5.61 7.94 9.62 3.12 6.95 2.59 14.61-.78 20.83M29.09 1.96c2.1.37 4.13 1.01 6.05 1.92M14.42 45.5c2.13 1.16 4.42 1.98 6.8 2.44M4.44 14.76c-2.85 6-3.15 13.17-.22 19.72 1.69 3.77 4.25 6.87 7.35 9.19"></path>
                    <circle cx="5.5" cy="12.5" r="2.5" fill="#fff" stroke="#005ce2" stroke-miterlimit="10"></circle>
                    <ellipse cx="44.5" cy="38.38" fill="#fff" stroke="#005ce2" stroke-miterlimit="10" rx="2.5" ry="2.38"></ellipse>
                  </g>
                </g>
              </g>
            </g>
          </svg>

          <span class="logo-text">Globlit</span>
        </a>

        <div class="searchBar glass-sub">
          <span class="searchIcon" aria-hidden="true">
            <svg class="icon icon-search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" aria-hidden="true">
              <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"></circle>
              <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
          </span>
          <input id="searchInput" type="search" placeholder="Search news" aria-label="Search news">
        </div>

        <div class="right_header">
          <div class="profile" for=" menu_dp">
            <img src="/assets/avatar.png" alt="profile">
          </div>

          <button id="themeToggle" class="themeBtn glass-sub" aria-label="Toggle theme">
            <svg class="icon icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" aria-hidden="true">
              <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="var(--text)" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>

          <button class="themeBtn glass-sub" id="historyBtn" aria-label="History">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M3 12a9 9 0 109-9" stroke="var(--text)" stroke-width="1.5" stroke-linecap="round" />
              <path d="M3 4v5h5" stroke="var(--text)" stroke-width="1.5" stroke-linecap="round" />
              <path d="M12 7v6l4 2" stroke="var(--text)" stroke-width="1.5" stroke-linecap="round" />
            </svg>
          </button>
        </div>
      </header>

      <nav class="nav" id="topicsNav"></nav>
    </div>

    <dialog id="historyDialog" closedBy="any">
      <header class="dialog-header">
        <button class="icon-btn" id="closeHistory">‚Üê</button>
        <h3>Recently Viewed</h3>
      </header>

      <div class="history-list" id="historyList"></div>
    </dialog>

    <!-- FEEDS -->
    <section class="feedsSection">
      <h2 id="feedText">For You</h2>
      <div class="feeds" id="feeds"></div>
    </section>

  </div>

  <dialog id="profileDialog" closedBy="any">
    <header class="dialog-header">
      <button class="icon-btn back-btn">‚Üê</button>
      <h3>Profile</h3>
    </header>

    <div class="field">
      <label>Username</label>
      <div class="field-row">
        <input type="text" id="username" value="User Name" disabled>
        <button class="soft-btn">Edit</button>
      </div>
    </div>

    <hr>

    <div class="dialog-actions">
      <a href="/" class="danger-btn">Delete Account</a>
      <a href="/auth/signout" class="soft-btn">Sign out</a>
    </div>

    <hr>

    <header class="dialog-header">
      <h3>Feedback</h3>
    </header>

    <textarea id="feedbackMessage" placeholder="Share your thoughts..."></textarea>

    <div class="dialog-actions row">
      <button class="primary-btn" id="send-feedback">
        <span class="btn-loader" aria-hidden="true"></span>
        <span class="btn-text">Send</span>
      </button>
    </div>
  </dialog>

  <article class="open">
    <div class="article-content">

      <header>
        <button class="icon-btn" aria-label="Back">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" aria-hidden="true">
            <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </button>

        <div class="newsTools">
          <button class="icon-btn" aria-label="Share article">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" aria-hidden="true">
              <path d="M4 12v7a1 1 0 001 1h14a1 1 0 001-1v-7" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M16 6l-4-4-4 4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M12 2v14" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>

          <button class="icon-btn" aria-label="Read article out loud">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" aria-hidden="true">
              <path d="M11 5l-3 4H5v6h3l3 4V5z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M19 8a5 5 0 010 8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M21 5a9 9 0 010 14" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>
        </div>
      </header>

      <div class="newsBrief">
        <div class="newsImg">
          <img src="#" alt="news-image">
        </div>
        <p></p>
      </div>

      <div class="newsAuthor">
        <p class="author"></p>

        <small></small>
      </div>

      <p class="content"></p>
    </div>
  </article>
</div>

<script>
  function initEmailJS() {
    if (typeof emailjs !== 'undefined') {
      emailjs.init("4uAQX-dm_CWin457Z");
      console.log('‚úì EmailJS initialized');
    } else {
      console.warn('‚ö†Ô∏è EmailJS library not loaded. Check CDN link in HTML.');
    }
  }
  initEmailJS();
</script>
<script>
  /* ================== SEND FEEDBACK ================== */
  const sendFeedbackBtn = document.getElementById("send-feedback");
  const feedbackInput = document.getElementById("feedbackMessage");
  const usernameInput = document.getElementById("username");

  sendFeedbackBtn.addEventListener("click", async () => {
    const message = feedbackInput.value.trim();
    const username = usernameInput.value.trim() || "Anonymous";

    if (!message) {
      alert("Please write your feedback");
      return;
    }

    sendFeedbackBtn.classList.add("loading");

    try {
      await emailjs.send(
        "service_5qycaiw",
        "template_u2o5eym", {
          sender_name: username,
          message,
          to_email: "ezekwennacd@gmail.com"
        }
      );

      feedbackInput.value = "";
      alert("Feedback sent üíô");
      dialog.close();

    } catch (err) {
      console.error(err);
      alert("Could not send feedback");
    } finally {
      sendFeedbackBtn.classList.remove("loading");
    }
  });
</script>

<script src="/scripts/news.js"></script>
